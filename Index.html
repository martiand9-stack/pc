<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pink Singularity - Balanced Swarm</title>
    <style>
        body { margin: 0; overflow: hidden; background-color: #1a000a; }
        canvas { display: block; }
        #info {
            position: absolute;
            top: 20px;
            width: 100%;
            text-align: center;
            color: #ffffff;
            font-family: 'Arial', sans-serif;
            pointer-events: none;
            letter-spacing: 4px;
            z-index: 10;
            text-shadow: 0 0 15px #ff1493;
            font-weight: bold;
            text-transform: uppercase;
        }
    </style>
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>
</head>
<body>
    <div id="info">FELIZZZZ DIAAAA DEEE SANNNN VALENTINNNNðŸ’žðŸ’žðŸ˜­ â€¢ TEEEE AMOOOOðŸ’žðŸ’žðŸ˜­</div>

    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
        import { EffectComposer } from 'three/addons/postprocessing/EffectComposer.js';
        import { RenderPass } from 'three/addons/postprocessing/RenderPass.js';
        import { UnrealBloomPass } from 'three/addons/postprocessing/UnrealBloomPass.js';

        // --- Scene & Camera ---
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x2d0015);
        scene.fog = new THREE.FogExp2(0x2d0015, 0.01);

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
        camera.position.set(0, 12, 28);

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        renderer.toneMapping = THREE.ReinhardToneMapping;
        document.body.appendChild(renderer.domElement);

        const controls = new OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;
        controls.autoRotate = true;
        controls.autoRotateSpeed = 0.4;

        // --- Black Hole Core ---
        const blackHole = new THREE.Mesh(
            new THREE.SphereGeometry(2.5, 64, 64),
            new THREE.MeshBasicMaterial({ color: 0x000000 })
        );
        scene.add(blackHole);

        const diskGeo = new THREE.RingGeometry(2.8, 10, 128);
        const diskMaterial = new THREE.ShaderMaterial({
            uniforms: { uTime: { value: 0 } },
            vertexShader: `
                varying vec2 vUv;
                varying vec3 vPos;
                void main() {
                    vUv = uv; vPos = position;
                    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
                }
            `,
            fragmentShader: `
                uniform float uTime;
                varying vec2 vUv;
                varying vec3 vPos;
                void main() {
                    float dist = length(vPos);
                    float angle = atan(vPos.y, vPos.x);
                    float spiral = sin(angle * 4.0 + uTime * 2.0 + dist * 1.5);
                    vec3 color = vec3(1.0, 0.15, 0.6); 
                    float intensity = 4.0 / (dist - 2.0); 
                    float alpha = smoothstep(2.5, 3.2, dist) * (1.0 - smoothstep(9.5, 10.0, dist));
                    gl_FragColor = vec4(color * intensity * (0.8 + 0.2 * spiral), alpha);
                }
            `,
            transparent: true, side: THREE.DoubleSide, blending: THREE.AdditiveBlending, depthWrite: false
        });
        const disk = new THREE.Mesh(diskGeo, diskMaterial);
        disk.rotation.x = -Math.PI / 2.2;
        scene.add(disk);

        // --- Drift Particles ---
        const particleCount = 6000;
        const pGeo = new THREE.BufferGeometry();
        const pPos = new Float32Array(particleCount*3);

        for(let i=0;i<particleCount;i++){
            pPos[i*3] = (Math.random()-0.5)*100;
            pPos[i*3+1] = (Math.random()-0.5)*100;
            pPos[i*3+2] = (Math.random()-0.5)*100;
        }

        pGeo.setAttribute('position', new THREE.BufferAttribute(pPos, 3));
        scene.add(new THREE.Points(pGeo, new THREE.PointsMaterial({
            color: 0xffe4ed, size: 0.12, transparent: true, opacity: 0.5, blending: THREE.AdditiveBlending
        })));

        // --- Text Swarm ---
        const phrases = [
            "MI CHINITA ðŸ’žðŸ’žðŸ˜­TEEE AMOOOO TEEEE AMOOOOðŸ’žðŸ˜­",
            "I LOVEEE YOUUY HONEYðŸ’žðŸ’žðŸ˜­",
            "TEEE AMOOOO TEEEE AMOOOOðŸ’žðŸ’žðŸ˜­",
            "I LOVEEE YOUUUUðŸ’žðŸ’žðŸ˜­",
            "MI COSHITA PRESHIOSHA ðŸ’žðŸ’žTEEE AMOOO MASSSS Y MASSS DEEEE LOOOO QUEEEE TEEE INMAGINASSSðŸ’žðŸ’žðŸ˜­"
        ];
        const textSprites = [];

        function createText(text){
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');

            const fontSize = 120;
            ctx.font = `900 ${fontSize}px Arial Black`;
            const textMetrics = ctx.measureText(text.toUpperCase());
            canvas.width = textMetrics.width + 200;
            canvas.height = fontSize*2;

            ctx.font = `900 ${fontSize}px Arial Black`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillStyle = '#FFFFFF';
            ctx.strokeStyle = '#000000';
            ctx.lineWidth = 10;
            ctx.strokeText(text.toUpperCase(), canvas.width/2, canvas.height/2);
            ctx.fillText(text.toUpperCase(), canvas.width/2, canvas.height/2);

            const texture = new THREE.CanvasTexture(canvas);
            texture.needsUpdate = true;

            const sprite = new THREE.Sprite(new THREE.SpriteMaterial({
                map: texture, transparent:true, depthTest:false
            }));

            // Tall letters, slightly compressed horizontally
            const scaleFactor = 0.02;
            sprite.scale.set(canvas.width*scaleFactor*0.8, canvas.height*scaleFactor*1.2, 1); // X compressed 0.8, Y stretched 1.2

            return sprite;
        }

        for(let i=0;i<phrases.length;i++){
            const sprite = createText(phrases[i]);
            const radius = 10 + Math.random()*12;
            const theta = Math.random()*Math.PI*2;
            const phi = Math.acos((Math.random()*2)-1);
            sprite.position.set(
                radius*Math.sin(phi)*Math.cos(theta),
                radius*Math.sin(phi)*Math.sin(theta),
                radius*Math.cos(phi)
            );
            textSprites.push({obj:sprite, speed:0.3+Math.random()*0.5, radius:radius, angle:Math.random()*Math.PI*2, yPhase:Math.random()*Math.PI});
            scene.add(sprite);
        }

        // --- Post Processing ---
        const composer = new EffectComposer(renderer);
        composer.addPass(new RenderPass(scene, camera));
        composer.addPass(new UnrealBloomPass(new THREE.Vector2(window.innerWidth,window.innerHeight),1.6,0.4,0.3));

        // --- Animation Loop ---
        const clock = new THREE.Clock();
        function animate(){
            requestAnimationFrame(animate);
            const time = clock.getElapsedTime();
            diskMaterial.uniforms.uTime.value = time;
            disk.rotation.z = time*0.1;

            textSprites.forEach(data=>{
                data.angle += 0.006*data.speed;
                data.obj.position.x = Math.cos(data.angle)*data.radius;
                data.obj.position.z = Math.sin(data.angle)*data.radius;
                data.obj.position.y += Math.sin(time + data.yPhase)*0.015;
            });

            controls.update();
            composer.render();
        }

        window.addEventListener('resize', ()=>{
            camera.aspect = window.innerWidth/window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth,window.innerHeight);
            composer.setSize(window.innerWidth, window.innerHeight);
        });

        animate();
    </script>
</body>
</html>
